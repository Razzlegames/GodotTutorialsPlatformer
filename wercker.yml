# Example: https://github.com/wercker/wercker/blob/master/wercker.yml


export:
    box: razzlegames/godot-ci:docker0
    steps:
        - script:
            name: export resource file for stand alone Godot Server
            code: cd Godot && godot -v --export "Linux/X11" ./resources.pck && find .
                       
        - script:
            name: Copy resource file to Werker paths
            code: cp -v Godot/resources.pck "$WERCKER_OUTPUT_DIR" && cp -vR Docker/MultiplayerServer/Dockerfile "$WERCKER_OUTPUT_DIR"

        - script:
            name: List what's in Wercker output
            code: find "$WERCKER_OUTPUT_DIR" 

        - script:
            name: Test resources exist
            code: test -f "$WERCKER_OUTPUT_DIR/resources.pck" 
build:
    box: razzlegames/godot-ci:docker0
    steps:
        - script:
             name: Print all local files to check for resources
             code: find ./
        - internal/docker-build:
            dockerfile: Dockerfile
            image-name: razzlegba-chat-server
