

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-US">

<head profile="http://gmpg.org/xfn/11">
  <meta http-equiv="Content-Type"
    content="text/html; charset=UTF-8" />

  <title>Coranac &raquo; 2009 &raquo; June</title>

  <!-- leave this for stats please -->
    <meta name="generator" content="WordPress 2.7.1" />

  <style type="text/css">
    @import url( http://www.coranac.com/wordpress/wp-content/themes/crn/style.css );
  </style>

  <script language="JavaScript" type="text/javascript" src="http://www.coranac.com/crn.js"></script>

  <link rel="alternate" type="application/rss+xml" title="RSS 2.0"
    href="http://www.coranac.com/feed/" />
  <link rel="alternate" type="text/xml" title="RSS .92"
    href="http://www.coranac.com/feed/rss/" />
  <link rel="alternate" type="application/atom+xml" title="Atom 0.3"
    href="http://www.coranac.com/feed/atom/" />

  <link rel="pingback" href="http://www.coranac.com/wordpress/xmlrpc.php" />
		<link rel='archives' title='June 2009' href='http://www.coranac.com/2009/06/' />
	<link rel='archives' title='May 2009' href='http://www.coranac.com/2009/05/' />
	<link rel='archives' title='April 2009' href='http://www.coranac.com/2009/04/' />
	<link rel='archives' title='February 2009' href='http://www.coranac.com/2009/02/' />
	<link rel='archives' title='December 2008' href='http://www.coranac.com/2008/12/' />
	<link rel='archives' title='November 2008' href='http://www.coranac.com/2008/11/' />
	<link rel='archives' title='September 2008' href='http://www.coranac.com/2008/09/' />
	<link rel='archives' title='August 2008' href='http://www.coranac.com/2008/08/' />
	<link rel='archives' title='June 2008' href='http://www.coranac.com/2008/06/' />
	<link rel='archives' title='May 2008' href='http://www.coranac.com/2008/05/' />
	<link rel='archives' title='April 2008' href='http://www.coranac.com/2008/04/' />
	<link rel='archives' title='February 2008' href='http://www.coranac.com/2008/02/' />
	<link rel='archives' title='January 2008' href='http://www.coranac.com/2008/01/' />
	<link rel='archives' title='December 2007' href='http://www.coranac.com/2007/12/' />
	<link rel='archives' title='November 2007' href='http://www.coranac.com/2007/11/' />
	<link rel='archives' title='October 2007' href='http://www.coranac.com/2007/10/' />
	<link rel='archives' title='June 2007' href='http://www.coranac.com/2007/06/' />
	<link rel='archives' title='April 2007' href='http://www.coranac.com/2007/04/' />
	<link rel='archives' title='March 2007' href='http://www.coranac.com/2007/03/' />
	<link rel='archives' title='February 2007' href='http://www.coranac.com/2007/02/' />
	<link rel='archives' title='January 2007' href='http://www.coranac.com/2007/01/' />
	<link rel='archives' title='August 2006' href='http://www.coranac.com/2006/08/' />
		<link rel="stylesheet" href="http://www.coranac.com/wordpress/wp-content/plugins/codesnippet/codesnippet.css" type="text/css" />
<style type="text/css">
.codesnip-container	{border:1px solid #ccc; background:#eee; padding: 5px;margin:10px;}
</style>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://www.coranac.com/wordpress/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://www.coranac.com/wordpress/wp-includes/wlwmanifest.xml" /> 
<meta name="generator" content="WordPress 2.7.1" />

</head>

<body onload="main();">
<div id="rap">
<h1 id="header">
	<a href="http://www.coranac.com/">Coranac</a>
</h1>

<div id="content">
<!-- end header -->

<div class="post" id="post-76">
	<div class="storyheader">
		<h3 class="storytitle"><a href="http://www.coranac.com/2009/06/28/bughunting/" rel="bookmark">
		Bughunting</a></h3>
		<div class="meta">
		2009-06-28 &ndash; 18:56 | <ul class="post-categories">
	<li><a href="http://www.coranac.com/category/tainment/" title="View all posts in tainment" rel="category tag">tainment</a></li></ul>. 
		</div>
	</div>
	<div class="storycontent">
		

<p>
Yes! 
<span style="font-size:200%"> <b>YES!!</b> </span>
<span style="font-size:400%; font-style:oblique;"> <b>OH GOD, YES!!!</b> </span>
</p><div>&nbsp;</div>

I mean &hellip; uhm &hellip;<br />
&hellip;<br />
<p>
While browsing throught the E3 reports, I was moderately pleased to see 
the Aliens versus Predator series (of <i>games</i>, not movies) is 
getting another sequel.
</p><div>&nbsp;</div>

<p>
I've always had a soft spot for 
<a href="http://en.wikipedia.org/wiki/Xenomorph_%28Alien%29">xenomorphs</a>
. 
This extends to the 
<a href="http://en.wikipedia.org/wiki/Aliens_versus_Predator_%28computer_game%29">Aliens versus Predator games</a>
 
that have been released on the PC. The first AVP came out in 1999 
and I think this was one of the first PC games I ever bought. While 
not really as popular or as rich in storyline as, say, 
HalfLife, I still think it has many redeeming qualities even today. 
For example &hellip;
</p><br />

<div class="cptfr" style="width:300px;">
  <a href="http://www.coranac.com/img/post/avp3/headbite-to-be.jpg" target="_blank">  <img src="http://www.coranac.com/img/thumbs/headbite-to-be-th.jpg" 
    alt="" width="300" /></a><br />
  An Alien on the ceiling watching dinner walk by: I seeee you.
</div>


<p>
You can play as Human, Alien, or Predator, each with very different 
styles of play. This was pretty unique back then for FPSs. Actually, I 
think it still is. The Alien in particular was unusual: <i>very</i> 
quick, able to walk on walls and ceilings and a strange fish-eye lens 
point of view. It also had no ranged attack, which meant you had to get 
up close and personal to attack. Moreover, the alien did not have much 
in the way of hitpoints, which effectively meant that you had to not 
only get close, but get close <i>undetected</i>. You had to hide in dark 
corners and on ceilings waiting for people to walk by and then bite their 
heads off.
</p>
<p>
Most games will put you as the Hero Marine against bug-like critters 
to be slaughtered en-masse. This game gives you the opportunity to see
what it looks like from the other side, which is definitely an educational experience. One thing that comes very clear, 
for example, is <i>why</i> fire and flamethrowers are not your friend. 
Bullets could often be avoided (except from 
turrets), but flamethrowers put up an entire wall of fire and one 
hit would keep burning for quite some time which, for creatures with 
few hitpoints, would fit nicely into the bad things category. 
</p><br />

<p>
Playing against the aliens was also a different-than-usual experience. 
Able to hide anywhere (how many FPSs require you to check the ceilings?), 
nearly invisible against the background, fast and very, very deadly. 
</p>
<p>
And &hellip; oh yeah! They bleed acid. Yeah. 
</p>
<p>
They also had a very peculiar 
reaction to being shot: exploding and scattering themselves over a wide 
area. All while bleeding acid. If you remember your physics classes, 
you should be aware of this thing called inertia: things in motion will 
continue in the same direction. You know which direction the Aliens will 
usually be moving towards when you shoot them? You. You know in which 
direction all the parts and blood will be moving? You!
</p>
<p>
In other words: even when you kill them, there's a good chance they'll 
kill you right back.
</p>

<div class=cblock>
<table>
<tr><td>
<div class="cpt" style="width:300px;">
  <a href="http://www.coranac.com/img/post/avp3/rain.jpg" target="_blank">  <img src="http://www.coranac.com/img/thumbs/rain-th.jpg" 
    alt="" width="300" /></a><br />
  Acid rain. (click for details)
</div>

</td><td>
<div class="cpt" style="width:300px;">
  <a href="http://www.coranac.com/img/post/avp3/splish.jpg" target="_blank">  <img src="http://www.coranac.com/img/thumbs/splish-th.jpg" 
    alt="" width="300" /></a><br />
  Spliiiish. AKA AARRGH!GETITOFF!GETITOFF!GETITOFF!!!.
</div>

</td>
</tr>
</table>
</div>

<p>
The game's also quite hard. I'd almost say 
<a href="http://tvtropes.org/pmwiki/pmwiki.php/Main/NintendoHard">Nintendo 
Hard</a>. AVP 1 had no in-level saving. I don't think there's <i>ever</i> 
been a PC FPS that didn't allow you to save at will. Combined with the 
fact that the characters were realistically weak (a 
<a href="http://en.wikipedia.org/wiki/rocket%20jump">rocket jump</a>
,
would only get <i>parts</i> of you to far-off distances or heights; on 
average you remain in the same spot), the lack of saving increased the tension 
considerably.
</p>
<p>
Of course a sizable group of gamers, cowardly pussies that they are, 
complained and eventually a save feature was added later. Shame, really; 
the levels are short enough for it to work, and it's actually way more 
fun to play when you're running for dear life.
</p><br />

<p>
And then there's the motion tracker. If you've seen the movie Aliens, 
you'll know what I'm talking about. Basically, it's a device that 
measures how deep the shit you're in is. If it emits a low 
<i>bup</i>, you're safe; if it starts giving off a high-pitched 
<i>beep</i> (or worse, multiple beeps), you're in trouble.
</p>
<p>
This truly is the stuff of nightmares. There's actually something worse 
than darkness: darkness and having a reminder that you're probably going to 
die in the next few steps if you're not careful. This feeling was enhanced 
by the night vision goggles which turn off the tracker. So now you only
know where something <i>was</i>, roughly, and you have to find it again. 
The motion tracker is without a doubt the single most evil and mind-screwing 
feature ever put in a game. For those who want to argue in favor of, say, 
Resident Evil or Silent Hill or other horror games: No! You're wrong! 
It really is that simple.
</p><br />

<p>
On second thought, there is something worse. It's called a 
facehugger. The spiderlike critters from the Alien series that jump you 
from out of nowhere and basically rape your face. The game has those too. 
To show just how bad these are, here's a little anecdote about my first 
encounter with one.
</p>

<blockquote>
<h4>Why facehuggers are evil</h4>
<p>
It's the third Marine mission: Invasion. You have to get to the top of 
the tower for a rescue. Up to this point I had done what I'd always 
done in an FPS: make slow but steady progress to avoid any nasty surprises.
From this level onward that strategy doesn't work anymore. At all.
</p>
<p>
The reason for that is that now the aliens start to respawn at 
semi-random locations. So not only am I a puny hooman faced with 
very quick aliens that can come from out of nowhere trying to take 
my head off, now there's an endless supply of them too and only one 
of me. Oh and did I mention there's no save? Not that it'd matter 
because they'd spawn at a different location anyway, but still.
</p>
<p>
In any case, at some point you'd clue in to the fact that the only 
way this is gonna work is to just make a blind run for it and 
<s>hope</s> <s>pray</s> curse for the best. Amazingly, this worked 
out pretty well. That is, until I took an elevator down to face this:
</p>

<div class=cblock><div class="cpt" style="width:600px;">
  <a href="http://www.coranac.com/img/post/avp3/the-egg.jpg" target="_blank">  <img src="http://www.coranac.com/img/post/avp3/the-egg.jpg" 
    alt="" width="600" /></a><br />
  An open Alien egg. Initialize panic mode.
</div>
</div>

<p>
An open Alien egg. And I could hear the pitter-patter of tiny feet down the 
corridor to the right, which also lit up on the tracker. When turning 
round the corner, the sound became louder. But still, I could not 
actually see the little bastard yet. &ldquo;Well. Shit.&rdquo; is 
something of an understatement at this point.
</p>
<p>
But <i>then</i> I hear something above me as well: an Alien was 
climbing down to the room in the image. &ldquo;Well. Shit.&rdquo; has 
now become completely inappropriate and I headed back to the elevator 
room to kill it. I basically sprayed the whole room with fire, hoping 
I'd catch it at some point. And I did. I continued to dance around to 
avoid it until it burst. And then all was quite again. I didn't even 
hear the face hugger moving around anymore in the distance. Thinking all 
was safe, I turned round to hunt down the face hugger again an&hellip;
</p>

<div class=cblock style="color:red;">
<b><i>
<span style="font-size:200%">SSSSSSSSSSKKKKKKKKKKKKKKRRRRREEEEEEE</span><br />
<span style="font-size:180%">EEEEEEEEEEEEEEEAAAAAAAAAAAAAARRRRRRR</span><br />
<span style="font-size:145%">RRRGGGGGGGHHHHHHHHHHHHHHWITHTHEHURTING</span><br />
<span style="font-size:110%">ANDTHEPAINANDTHEDYINGOHBLOODYFUCKINGHELL</span><br />
<span style="font-size:80%">WHATWASTHAT?!?!?!!!ELEVENTYONE!!?!!</span>
</i></b>
</div>

<p>
Turns out the reason I didn't hear the facehugger anymore wasn't 
that I'd killed it or that it had moved too far away, but because it 
was already in mid-jump. Not only did it get me, it got me completely 
by surprise and the blood-curdling scream it emitted 
actually made me fall off my chair. Literally. It scared me so much that I 
actually leaped out of my chair. It took about a minute before I 
could even hold the mouse again because my hands were shaking so much. No 
game has <i>ever</i> had that strong of an effect before or since. This was 
just awful. And yet awesome at the same time.
</p>
</blockquote>

<p>
Facehuggers are just plain evil. Just hearing one moving in the area 
is enough to give me hives.
</p><br />

<p>
The only really bad thing about the game is that it 
won't play on current computers &ndash; some graphics and sound glitches
that made crashed the game or made it unplayable. However, this has 
actually been remedied recently. People have been tinkering with the 
source code and fixed the most important issues. See
<a href="http://forumplanet.gamespy.com/tech_support/b49029/1049364">
forumplanet.gamespy.com/tech_support/b49029/1049364</a> for details 
and links to patches.
</p><div>&nbsp;</div>

<p>
Compared to AVP 1, its sequel was, well, ultimately something of a 
let-down. It's still good playing, but I felt that it could have been 
so much more. Sure, it had better graphics. Well, more detailed models 
and textures anyway; unfortunately, the textures also looked really 
coarse and flat, and decals would often seem to be placed <i>over</i> 
the polygons, rather than on it, which just looked awful. AVP 1 had 
destructable light sources &ndash; something the Alien could make use of 
very well &ndash; but AVP 2 didn't. It also did not have adjustable gamma 
settings, which <i>really</i> hurt because often I literally could 
not see anything. And they took out the cheat modes and skirmish 
*sigh*.
</p>
<p>
The Aliens had also changed in some very bad ways. In the original, 
they were fast and furious, but in AVP 2 it often seemed thay they were 
just hobbling along on their way too skinny legs. Instead of looking 
like the vicious and fast killing machines, they came off more as clumsy 
puppies. Okay, yes, puppies with <i>really</i> sharp claws and teeth, 
but not the terrors they're supposed to be.
</p>
<p>
They also didn't explode into parts with that <i>delightful</i> crackling 
sound anymore, or bleed over everything (mostly you). Mostly they just
flopped down. Also, there seemed to be only one or two death poses and I 
think only a single animation timer for all critters. Often you'd find 
yourself in a field of dead aliens which lay down in exactly the same way. 
I know it doesn't sound like a big deal, but little things like this can 
spoil the mood completely. Worst of all though was what they did with the 
facehuggers: they took away the scream when they kill you. This completely 
removed the scare factor <kbd>:(</kbd>
</p>
<p>
Having said that, it also did some things very right. There was one 
interconnected story line, with the threads of the three playmodes 
intersecting at several instances. Very nicely done. Also, as the 
Alien you actually played through the facehugger and chestburster 
stages. This was also fun.
</p>

<div class=cblock>
<table>
<tr>
<td><div class="cpt" style="width:200px;">
  <a href="http://www.coranac.com/img/post/avp3/avp2-bad-tex.jpg" target="_blank">  <img src="http://www.coranac.com/img/thumbs/avp2-bad-tex-th.jpg" 
    alt="" width="200" /></a><br />
  Ugly texturing (click for details).
</div>
</td>
<td><div class="cpt" style="width:200px;">
  <a href="http://www.coranac.com/img/post/avp3/avp2-sync-death-01.jpg" target="_blank">  <img src="http://www.coranac.com/img/thumbs/avp2-sync-death-01-th.jpg" 
    alt="" width="200" /></a><br />
  Synchonized dying.
</div>
</td>
<td><div class="cpt" style="width:200px;">
  <a href="http://www.coranac.com/img/post/avp3/avp2-chest-01.jpg" target="_blank">  <img src="http://www.coranac.com/img/thumbs/avp2-chest-01-th.jpg" 
    alt="" width="200" /></a><br />
  Chestburster finding its way out.
</div>
</td>
</tr>
<tr>
<td><div class="cpt" style="width:200px;">
  <a href="http://www.coranac.com/img/post/avp3/avp2-junc-a.jpg" target="_blank">  <img src="http://www.coranac.com/img/thumbs/avp2-junc-a-th.jpg" 
    alt="" width="200" /></a><br />
  Intersecting story line - Alien.
</div>
</td>
<td><div class="cpt" style="width:200px;">
  <a href="http://www.coranac.com/img/post/avp3/avp2-junc-m.jpg" target="_blank">  <img src="http://www.coranac.com/img/thumbs/avp2-junc-m-th.jpg" 
    alt="" width="200" /></a><br />
  Intersecting story line - Marine.
</div>
</td>
<td><div class="cpt" style="width:200px;">
  <a href="http://www.coranac.com/img/post/avp3/avp2-junc-p.jpg" target="_blank">  <img src="http://www.coranac.com/img/thumbs/avp2-junc-p-th.jpg" 
    alt="" width="200" /></a><br />
  Intersecting story line - Predator.
</div>
</td>
</tr>
</table></div>
<p>
And now there's gonna be a third installment. Like in AVP 2, there 
will be an interwoven story, so that's good. From the pictures I've 
seen, the graphics are going to be awesome. Textures are crips, motion
looks fluid &ndash; it just looks <i>right</i> again. 
It also looks like it's not going to be for the faint of heart, with 
lovely gratuitous displays of blood and guts and trophy-taking and 
everything (see <a href="http://blip.tv/file/2202917">here</a> 
for video). 
</p>
<p>
I was somewhat surprised to see Sega as the publisher for the 
game. It seemed a little odd at first, but if you take into account that 
they're a 
<a href="http://en.wikipedia.org/wiki/F-Zero_GX">bunch of</a>
 

<a href="http://en.wikipedia.org/wiki/Super_Monkey_Ball">fucking</a>
 

<a href="http://en.wikipedia.org/wiki/Super_Monkey_Ball_2">sadists</a>
, I think it is actually 
quite fitting.
</p><div>&nbsp;</div>

<p>
So yeah, I'm looking forward to this one.
</p>

<!-- http://www.gamez.nl/xbox/special/27199/e3-special-aliens-vs-predator.html -->
<!-- http://www.cracked.com/article_15696_10-most-irritatingly-impossible-old-school-video-games.html -->
	</div>
	<div class="feedback">
		<a href="http://www.coranac.com/2009/06/28/bughunting/#respond" title="Comment on Bughunting">Comments (0)</a>	</div>
</div>

<div class="post" id="post-69">
	<div class="storyheader">
		<h3 class="storytitle"><a href="http://www.coranac.com/2009/06/05/new-geshi/" rel="bookmark">
		new and improved geshi</a></h3>
		<div class="meta">
		2009-06-05 &ndash; 21:13 | <ul class="post-categories">
	<li><a href="http://www.coranac.com/category/blag/" title="View all posts in blag" rel="category tag">blag</a></li></ul>. 
		</div>
	</div>
	<div class="storycontent">
		<p>
With Tonc I pretty much did all the syntax highlighting of code manually. 
As you might expect, this experience was &ndash; well, the proper description is 
something not suitable for anyone under the age of several thousand, 
so let's keep it at &ldquo;somewhat less than pleasant&rdquo;. So the first 
thing I looked when starting this whole blogging gig for was something 
that could do that automatically. In my case, that was 
<a href="http://wordpress.org/extend/plugins/codesnippet-20/">codesnippet</a>, 
which was build on the very awesome 
<a href="http://qbnz.com/highlighter/">Geshi</a>. There were some 
small problems with number formatting and whitespace handling, but 
overall it's served me well.
</p>
<p>
The Geshi that came with it was &hellip; 1.0.7.20, I think. In any case, Geshi's
is now at 1.0.8.3, so I figured it was time for an upgrade. Most notable was 
that the way numbers were parsed has been greatly modified, with different 
types of representations now being parsed separately &ndash; and correctly 
to boot. Right now, it's almost fully correct, as you can see from the list 
below:
</p>

<div class="cpp"><div class="cpp proglist" style=" "><span class="co1">// Regular int</span><br />

<span class="nu0">123</span><br />
<span class="nu0">123l</span><br />
<span class="nu0">123L</span><br />
123ll &nbsp; &nbsp; &nbsp; <span class="co1">// fail</span><br />
123LL &nbsp; &nbsp; &nbsp; <span class="co1">// fail</span><br />

123u&nbsp; &nbsp; &nbsp; &nbsp; <span class="co1">// fail</span><br />
123U&nbsp; &nbsp; &nbsp; &nbsp; <span class="co1">// fail</span><br />
+<span class="nu0">123</span><br />

-<span class="nu0">123</span><br />
<br />
<span class="co1">// Octal</span><br />
<span class="nu0">0123</span><br />
<br />
<span class="co1">// Hex</span><br />
<span class="nu0">0x12</span><br />
<span class="nu0">0x123</span><br />
0x123.4<br />

<br />
<span class="co1">// Float</span><br />
<span class="nu0">123.4</span><br />
<span class="nu0">123.4f</span><br />
<span class="nu0">123.4F</span><br />
+<span class="nu0">123.4</span><br />
-<span class="nu0">123.4</span><br />
<span class="nu0">1.2e3</span><br />

<span class="nu0">1.2E3</span><br />
<span class="nu0">1.2e+3</span><br />
<span class="nu0">1.2e-3</span><br />
<br />
<span class="co1">// Inner</span><br />
(<span class="nu0">1.23</span>)<br />
abc123de</div></div>

<p>Only some of the more special integer literals aren't parsed correctly, 
specifically the unsigned (<code>-U</code>) and long long 
(<code>-LL</code>) suffixes aren't accepted. I don't suppose hex floats will 
work either, but that's a GCC extension anyway.
</p>
<p>
To fix this, you need to modify geshi a little; specifically the 
GESHI_NUMBER_INT_CSTYLE regular expression:
</p>

<div class="none"><div class="none proglist" style=" ">&nbsp; GESHI_NUMBER_INT_CSTYLE =&gt;<br />
&nbsp; &nbsp; <span class="st0">'(?&lt;![0-9a-z_<span class="es0">\.</span>%])(?&lt;![<span class="es0">\d</span><span class="es0">\.</span>]e[+<span class="es0">\-</span>])([1-9]<span class="es0">\d</span>*?|0)l(?![0-9a-z<span class="es0">\.</span>])'</span>,</div></div>

<p>
&hellip; yeah. I'm not sure why it's formulated like that either. I'd have thought 
'<code>\b</code>' would have worked just as well, but alright. Anyway, notice the single '<code>l</code>' character in there? That needs to be extended to something 
that matches a potential single '<code>u</code>', possibly followed by one or two 
'<code>l</code>'s. In other words: '<code>u?l{0,2}</code>'.
</p>

<div class="none"><div class="none proglist" style=" ">&nbsp; GESHI_NUMBER_INT_CSTYLE =&gt;<br />
&nbsp; &nbsp; <span class="st0">'(?&lt;![0-9a-z_<span class="es0">\.</span>%])(?&lt;![<span class="es0">\d</span><span class="es0">\.</span>]e[+<span class="es0">\-</span>])([1-9]<span class="es0">\d</span>*?|0)<b>u?l{0,2}</b>(?![0-9a-z<span class="es0">\.</span>])'</span>,</div></div>

<h4 id="sssec-html">HTML in code</h4>

<p>
An astute readed may have noted the bold in the previous snippet. Normally, 
you can't do that in Geshi.. One of the things that Geshi does is translate 
HTML entities like '<code>&lt;</code>' into things like "<code>&amp;lt;</code>" 
so that it'll turn up right on the resulting page. This, of course, is one of the 
things Geshi is expected to do. However, in this case it also makes it impossible 
to add HTML parts in the code snippet, which at times can be very useful.
</p>
<p>
So what do we do now? Well, we can use <i>escaped</i> HTML tags. Much like 
"<code>\n</code>" doesn't actually mean backslash + '<code>n</code>' but a 
newline character, "<code>\&lt;</code>" can be used for the actual 
'<code>&lt;</code>'. And to <i>un</i>escape that, a double backslash can be used, 
much like it is in C.
</p>

<div class="none"><div class="none proglist" style=" ">\&lt;b\&gt;BOLD\&lt;/b\&gt; &nbsp; &nbsp;becomes &nbsp; &nbsp; <b>BOLD</b></div></div>

<p>
There are several ways to implement this. One would be to modify it in the geshi 
code. I haven't tried that route yet because I expect it could get messy. That's 
arguably how it <i>should</i> be done, but it's easier to do it after the fact: 
when all the conversions have been done. Basically, you need something like this:
</p>

<div class="php"><div class="php proglist" style=" "><span class="co1">// Initialize geshi with the text to convert and language file to use.</span><br />
<span class="re0">$geshi</span> = <span class="kw2">new</span> GeSHi(<span class="re0">$text</span>, <span class="re0">$lang</span>, <span class="re0">$this</span>-&gt;geshi_path);<br />
<br />
<span class="co1">// This does the actual work.</span><br />
<span class="re0">$text</span>= <span class="re0">$geshi</span>-&gt;parse_code();<br />
<br />
<span class="co1">// Replace (un)escaped html entities.</span><br />
<span class="re0">$text</span>= <a href="http://www.php.net/str_replace"><span class="kw3">str_replace</span></a>(<br />
&nbsp; &nbsp; <a href="http://www.php.net/array"><span class="kw3">array</span></a>(<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span class="co1">// Normal entities</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span class="st_h">'\\&amp;lt;'</span>, <span class="st_h">'\\&amp;gt;'</span>, <span class="st_h">'\\&amp;amp;'</span>,<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span class="co1">// In-string escapes get crap added, gaddammittohell &gt;_&lt;.</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span class="st_h">'&lt;span class=&quot;es0&quot;&gt;&lt;&lt;/span&gt;'</span>,<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="st_h">'&lt;span class=&quot;es0&quot;&gt;&gt;&lt;/span&gt;'</span>, <br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="st_h">'&lt;span class=&quot;es0&quot;&gt;&amp;&lt;/span&gt;'</span>,<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span class="co1">// Unescaped entities</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span class="st_h">'\\&amp;'</span>, <span class="st_h">'\\&lt;'</span>, <span class="st_h">'\\&gt;'</span>), <br />
&nbsp; &nbsp; <a href="http://www.php.net/array"><span class="kw3">array</span></a>(<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span class="st_h">'&lt;'</span> &nbsp; &nbsp; , <span class="st_h">'&gt;'</span> &nbsp; &nbsp; , <span class="st_h">'&amp;'</span>, &nbsp; &nbsp;&nbsp; &nbsp; <span class="co1">// Normal entities</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span class="st_h">'&lt;'</span> &nbsp; &nbsp; , <span class="st_h">'&gt;'</span> &nbsp; &nbsp; , <span class="st_h">'&amp;'</span>, &nbsp; &nbsp;&nbsp; &nbsp; <span class="co1">// In-string entities.</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span class="st_h">'\\&amp;amp;'</span>, <span class="st_h">'\\&amp;lt;'</span>, <span class="st_h">'\\&amp;gt;'</span>&nbsp; &nbsp; <span class="co1">// Unescaped entities</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; ), <br />
&nbsp; &nbsp; <span class="re0">$text</span>);</div></div>

<p>
There are three sets of items to search &amp; replace here. The first two are 
the basic escaped tag delimiters, so that they'll actually result in HTML tags, 
and unescaped delimiters, so that you can print the combination itself. The 
third category are for HTML in string literals. Since the backslash has a 
specific meaning there as well, Geshi puts some highlighting stuff around it 
that would make the standard search fail. So that whole thing would need 
to be searched for and <s>destroyed</s>replaced.
</p>
<p>
It's ugly, I know, but it seems to work. It'd be nicer if this could be done 
in the parser itself, but I have a feeling that'd take changes in multiple 
places. Since I don't know the code that well yet, I'm not touching that 
one with a ten-foot pole.
</p>

<p>
Lastly, let's test the ARM asm highlighter:
</p>

<div class="gccarm"><div class="gccarm proglist" style=" "><span class="co2">// Regular int</span><br />
<span class="nu0">123</span><br />
<span class="nu0">123l</span><br />
<span class="nu0">123L</span><br />
<span class="nu0">123ll</span><br />
<span class="nu0">123LL</span> &nbsp; <br />
<span class="nu0">123u</span><br />
<span class="nu0">123U</span><br />
+<span class="nu0">123</span><br />
-<span class="nu0">123</span><br />
<br />
<span class="co2">// Binary</span><br />
<span class="nu0">0b01100110</span><br />
<span class="nu0">0B10101010</span><br />
<br />
<span class="co2">// Octal</span><br />
<span class="nu0">0123</span><br />
<br />
<span class="co2">// Hex</span><br />
<span class="nu0">0x12</span><br />
<span class="nu0">0x123</span><br />
0x123.4<br />
<br />
<span class="co2">// Float</span><br />
<span class="nu0">123.4</span><br />
<span class="nu0">123.4f</span><br />
<span class="nu0">123.4F</span><br />
+<span class="nu0">123.4</span><br />
-<span class="nu0">123.4</span><br />
<span class="nu0">1.2e3</span><br />
<span class="nu0">1.2E3</span><br />
<span class="nu0">1.2e+3</span><br />
<span class="nu0">1.2e-3</span><br />
<br />
<span class="co2">// Inner</span><br />
(<span class="nu0">1.23</span>)<br />
abc123de</div></div>

<p>
Still works too. Bitchin'.
</p>	</div>
	<div class="feedback">
		<a href="http://www.coranac.com/2009/06/05/new-geshi/#comments" title="Comment on new and improved geshi">Comments (1)</a>	</div>
</div>





<!-- begin footer -->
</div>

<!-- begin sidebar -->
<div id="menu">

<ul>
	<li class="pagenav">Pages:<ul><li class="page_item page-item-2"><a href="http://www.coranac.com/about/" title="About">About</a></li>
<li class="page_item page-item-6"><a href="http://www.coranac.com/documents/" title="Documents">Documents</a></li>
<li class="page_item page-item-10"><a href="http://www.coranac.com/links/" title="links">links</a></li>
<li class="page_item page-item-21"><a href="http://www.coranac.com/projects/" title="Projects">Projects</a></li>
</ul></li>	<li id="linkcat-2" class="linkcat">Blogroll
	<ul class='xoxo blogroll'>
<li><a href="http://www.badastronomy.com/" title="Astronomy related news debunking of heavenly myths.">Bad Astronomy</a></li>
<li><a href="http://www.codinghorror.com/blog/" title="Programming and human factors">Coding Horror</a></li>
<li><a href="http://www.scienceblogs.com/pharyngula/" title="Evolution, development, and random biological ejaculations from a godless liberal">pharyngula</a></li>
<li><a href="http://skeptico.blogs.com/" title="Critical thinking for an irrational world.">Skeptico</a></li>
<li><a href="http://worsethanfailure.com/Default.aspx" title="Curious perversions in information technology">Worse than failure</a></li>

	</ul>
</li>
<li id="linkcat-11" class="linkcat">Internal
	<ul class='xoxo blogroll'>
<li><a href="http://www.coranac.com">home</a></li>
<li><a href="http://www.coranac.com/tonc/text/" title="Tonc hub">Tonc</a></li>

	</ul>
</li>
	<li class="categories">Post categories:<ul>	<li class="cat-item cat-item-58"><a href="http://www.coranac.com/category/blag/" title="View all posts filed under blag">blag</a> (1)
</li>
	<li class="cat-item cat-item-22"><a href="http://www.coranac.com/category/code/" title="Assorted code snippets.">code</a> (11)
</li>
	<li class="cat-item cat-item-3"><a href="http://www.coranac.com/category/doc/" title="View all posts filed under documents">documents</a> (4)
</li>
	<li class="cat-item cat-item-30"><a href="http://www.coranac.com/category/math/" title="View all posts filed under math">math</a> (3)
</li>
	<li class="cat-item cat-item-35"><a href="http://www.coranac.com/category/nds/" title="View all posts filed under nds">nds</a> (3)
</li>
	<li class="cat-item cat-item-4"><a href="http://www.coranac.com/category/proj/" title="View all posts filed under projects">projects</a> (23)
<ul class='children'>
	<li class="cat-item cat-item-7"><a href="http://www.coranac.com/category/proj/grit/" title="The GBA Raster Image Transmogrifier. An open source graphics converter for GBA/NDS. Can convert from almost any image type to any NDS/GBA format. Comes in two flavors: command-line interface (multi-platform) and GUI (windows only).">grit</a> (11)
</li>
	<li class="cat-item cat-item-5"><a href="http://www.coranac.com/category/proj/tonc/" title="A detailed look into GBA programming. Tonc&#039;s text comes in html, chm and pdf. The library code, tonclib, is a mix of C and assembly. The many examples come in C and their binaries are runnable on emulators and hardware.">tonc</a> (12)
</li>
	<li class="cat-item cat-item-6"><a href="http://www.coranac.com/category/proj/usenti/" title="A (usually) simple to use editor for paletted images. It can handle bmp, pcx, png and tga files, has a number of useful palette manipulating tools and can export to GBA/NDS graphics formats.">usenti</a> (4)
</li>
</ul>
</li>
	<li class="cat-item cat-item-29"><a href="http://www.coranac.com/category/tainment/" title="View all posts filed under tainment">tainment</a> (6)
</li>
	<li class="cat-item cat-item-1"><a href="http://www.coranac.com/category/uncategorized/" title="View all posts filed under Uncategorized">Uncategorized</a> (6)
</li>
</ul></li>  <li id="archives">Archives:
	  <select name="cb-archive" style="width:90%;"
	    onChange='document.location.href=this.options[this.selectedIndex].value;'>
	    <option value="">
		  Select Month	    </option>
			<option value='http://www.coranac.com/2009/06/'> June 2009 &nbsp;(2)</option>
	<option value='http://www.coranac.com/2009/05/'> May 2009 &nbsp;(1)</option>
	<option value='http://www.coranac.com/2009/04/'> April 2009 &nbsp;(1)</option>
	<option value='http://www.coranac.com/2009/02/'> February 2009 &nbsp;(2)</option>
	<option value='http://www.coranac.com/2008/12/'> December 2008 &nbsp;(1)</option>
	<option value='http://www.coranac.com/2008/11/'> November 2008 &nbsp;(1)</option>
	<option value='http://www.coranac.com/2008/09/'> September 2008 &nbsp;(4)</option>
	<option value='http://www.coranac.com/2008/08/'> August 2008 &nbsp;(2)</option>
	<option value='http://www.coranac.com/2008/06/'> June 2008 &nbsp;(1)</option>
	<option value='http://www.coranac.com/2008/05/'> May 2008 &nbsp;(5)</option>
	<option value='http://www.coranac.com/2008/04/'> April 2008 &nbsp;(3)</option>
	<option value='http://www.coranac.com/2008/02/'> February 2008 &nbsp;(4)</option>
	<option value='http://www.coranac.com/2008/01/'> January 2008 &nbsp;(2)</option>
	<option value='http://www.coranac.com/2007/12/'> December 2007 &nbsp;(5)</option>
	<option value='http://www.coranac.com/2007/11/'> November 2007 &nbsp;(3)</option>
	<option value='http://www.coranac.com/2007/10/'> October 2007 &nbsp;(4)</option>
	<option value='http://www.coranac.com/2007/06/'> June 2007 &nbsp;(2)</option>
	<option value='http://www.coranac.com/2007/04/'> April 2007 &nbsp;(1)</option>
	<option value='http://www.coranac.com/2007/03/'> March 2007 &nbsp;(2)</option>
	<option value='http://www.coranac.com/2007/02/'> February 2007 &nbsp;(1)</option>
	<option value='http://www.coranac.com/2007/01/'> January 2007 &nbsp;(1)</option>
	<option value='http://www.coranac.com/2006/08/'> August 2006 &nbsp;(1)</option>
	  </select>
  </li>
  <li id="search">
    <label for="s">Search:</label>
    <form id="searchform" method="get" action="http://www.coranac.com">
	<div>
		<input type="text" name="s" id="s" size="16" /><br />
		<input type="submit" value="Search" />
	</div>
	</form>
  </li>
  <li id="meta">Meta:
	<ul>
				<li><a href="http://www.coranac.com/wordpress/wp-login.php">Log in</a></li>
		<li><a href="http://www.coranac.com/feed/" title="Syndicate this site using RSS"><abbr title="Really Simple Syndication">RSS</abbr></a></li>
		<li><a href="http://www.coranac.com/comments/feed/" title="The latest comments to all posts in RSS">Comments <abbr title="Really Simple Syndication">RSS</abbr></a></li>
<!--
		<li><a href="http://validator.w3.org/check/referer" title="This page validates as XHTML 1.0 Transitional">Valid <abbr title="eXtensible HyperText Markup Language">XHTML</abbr></a></li>
		<li><a href="http://gmpg.org/xfn/"><abbr title="XHTML Friends Network">XFN</abbr></a></li>
		<li><a href="http://wordpress.org/" title="Powered by WordPress, state-of-the-art semantic personal publishing platform."><abbr title="WordPress">WP</abbr></a></li>
-->
			</ul>
 </li>

</ul>

<form action="https://www.paypal.com/cgi-bin/webscr" method="post">
<input type="hidden" name="cmd" value="_s-xclick" />
<input type="image" src="https://www.paypal.com/en_US/i/btn/x-click-but11.gif" name="submit"
  alt="Please leave a contribution in the leetle box :)" />
<img src="https://www.paypal.com/en_US/i/scr/pixel.gif" width="1" height="1"  alt=""/>
<input type="hidden" name="encrypted" value="-----BEGIN PKCS7-----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-----END PKCS7-----
" />
</form>

<div>&nbsp;</div>

<script type="text/javascript"><!--
google_ad_client = "pub-9716169502604225";
/* 120x600 home 20080922 */
google_ad_slot = "0748086420";
google_ad_width = 120;
google_ad_height = 600;
//-->
</script>
<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>

</div>
<!-- end sidebar -->

<p class="credit"><!--18 queries. 0.537 seconds. --> <cite>Powered by <a href='http://wordpress.org/' title='Powered by WordPress, state-of-the-art semantic personal publishing platform.'><strong>WordPress</strong></a></cite></p>

</div>

</body>
</html>
<!--
<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<html>
<head>
</head>
<body>
<p>
My database has called in sick. Please imagine some 
annoying elevator tune till he gets back.
</p>
<p>
<small>[[Doo-di-doo tooo. Dum-di-dum-di-doo-dooo.]]</small>
</p>
</body>
</html>

-->